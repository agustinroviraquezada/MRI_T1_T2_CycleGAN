<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1752" height="397" viewBox="-0.5 -0.5 1752 397" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-05-16T13:16:36.684Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36&quot; version=&quot;21.3.2&quot; etag=&quot;UWDoOCzoxUU44R9jUVX_&quot; type=&quot;device&quot;&gt;&#10;  &lt;diagram id=&quot;HwzYKoTns4f85gm3xrVP&quot; name=&quot;PÃ¡gina-1&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;2400&quot; dy=&quot;294&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;0&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; background=&quot;none&quot; math=&quot;0&quot; shadow=&quot;1&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;ahQD_Y59aQVlEJvWlEwO-2&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;node4&quot; target=&quot;node2&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;node4&quot; value=&quot;&amp;lt;p style=&amp;quot;margin:0px;margin-top:4px;text-align:center;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Get_Process_Data.DownloadData&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; target_img: &amp;lt;br/&amp;gt; save_path_tensor: &amp;lt;br/&amp;gt; save_path_nii: &amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; __init__(self,save_path_nii,Datasets,target_img,dataPath=None): &amp;lt;/p&amp;gt;&quot; style=&quot;verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-80&quot; y=&quot;547.5&quot; width=&quot;420&quot; height=&quot;150&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;ahQD_Y59aQVlEJvWlEwO-4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;node2&quot; target=&quot;node0&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;node2&quot; value=&quot;&amp;lt;p style=&amp;quot;margin:0px;margin-top:4px;text-align:center;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Get_Process_Data.HDBETProcessor&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; output_folder: &amp;lt;br/&amp;gt; file_input: &amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; __init__(self, file_input, output_folder,mask=None): &amp;lt;br/&amp;gt; process_nii(self): &amp;lt;br/&amp;gt; apply_mask_to_files(self, mask_file): &amp;lt;/p&amp;gt;&quot; style=&quot;verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;430&quot; y=&quot;551&quot; width=&quot;350&quot; height=&quot;143&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;ahQD_Y59aQVlEJvWlEwO-1&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;node3&quot; target=&quot;node4&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;node3&quot; value=&quot;&amp;lt;p style=&amp;quot;margin:0px;margin-top:4px;text-align:center;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Get_Process_Data.Process&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; save_path: &amp;lt;br/&amp;gt; response_data: &amp;lt;br/&amp;gt; target_img: &amp;lt;br/&amp;gt; api_url: &amp;lt;br/&amp;gt; dataset_id: &amp;lt;br/&amp;gt; query: &amp;lt;br/&amp;gt; T2_path: &amp;lt;br/&amp;gt; version: &amp;lt;br/&amp;gt; T1_path: &amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; __init__(self, dataset_id, version, save_path, dest_path, target_img=(256,256)): &amp;lt;br/&amp;gt; RecQuery(self, id): &amp;lt;br/&amp;gt; extract_subject_modality(self, url): &amp;lt;br/&amp;gt; GetURL(self, ant_id): &amp;lt;br/&amp;gt; CoordinateProcess(self, subDic): &amp;lt;br/&amp;gt; Download(self, filename, url, download_directory): &amp;lt;br/&amp;gt; ApplyBET(self,filename,download_directory): &amp;lt;/p&amp;gt;&quot; style=&quot;verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-500&quot; y=&quot;430&quot; width=&quot;331&quot; height=&quot;385&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;node0&quot; value=&quot;&amp;lt;p style=&amp;quot;margin:0px;margin-top:4px;text-align:center;&amp;quot;&amp;gt;&amp;lt;b&amp;gt;Get_Process_Data.TransformImage&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; save_path: &amp;lt;br/&amp;gt; file_path: &amp;lt;br/&amp;gt; target_img: &amp;lt;br/&amp;gt; modality: &amp;lt;br/&amp;gt; subject_number: &amp;lt;br/&amp;gt; idx: &amp;lt;br/&amp;gt; group: &amp;lt;/p&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;/&amp;gt;&amp;lt;p style=&amp;quot;margin:0 0 0 4px;line-height:1.6;&amp;quot;&amp;gt; __init__(self,file_path,group,save_path,target_img=(256,256),idx=None): &amp;lt;br/&amp;gt; process_nii(self,indice=None): &amp;lt;br/&amp;gt; FilterImg(self,data,indice=None,blackper=0.6): &amp;lt;br/&amp;gt; crop_images(self,data,margin=5,target_shape=(256, 256)): &amp;lt;br/&amp;gt; ApplyOperations(self,img,seq): &amp;lt;/p&amp;gt;&quot; style=&quot;verticalAlign=top;align=left;overflow=fill;fontSize=14;fontFamily=Helvetica;html=1;rounded=0;shadow=0;comic=0;labelBackgroundColor=none;strokeWidth=1;fillColor=#F2CC8F;strokeColor=#E07A5F;fontColor=#393C56;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;890&quot; y=&quot;474&quot; width=&quot;350&quot; height=&quot;297&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs><filter id="dropShadow"><feGaussianBlur in="SourceAlpha" stdDeviation="1.7" result="blur"/><feOffset in="blur" dx="3" dy="3" result="offsetBlur"/><feFlood flood-color="#3D4574" flood-opacity="0.4" result="offsetColor"/><feComposite in="offsetColor" in2="offsetBlur" operator="in" result="offsetBlur"/><feBlend in="SourceGraphic" in2="offsetBlur"/></filter></defs><g filter="url(#dropShadow)"><path d="M 840 192.5 L 923.63 192.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 928.88 192.5 L 921.88 196 L 923.63 192.5 L 921.88 189 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="420" y="117.5" width="420" height="150" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 422px; height: 150px; padding-top: 118px; margin-left: 420px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 420px; height: 150px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>Get_Process_Data.DownloadData</b></p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> target_img: <br /> save_path_tensor: <br /> save_path_nii: </p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> __init__(self,save_path_nii,Datasets,target_img,dataPath=None): </p></div></div></div></foreignObject><text x="420" y="132" fill="#393C56" font-family="Helvetica" font-size="14px">Get_Process_Data.DownloadData...</text></switch></g><path d="M 1280 192.5 L 1383.63 192.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1388.88 192.5 L 1381.88 196 L 1383.63 192.5 L 1381.88 189 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="930" y="121" width="350" height="143" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 352px; height: 143px; padding-top: 121px; margin-left: 930px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 350px; height: 143px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>Get_Process_Data.HDBETProcessor</b></p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> output_folder: <br /> file_input: </p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> __init__(self, file_input, output_folder,mask=None): <br /> process_nii(self): <br /> apply_mask_to_files(self, mask_file): </p></div></div></div></foreignObject><text x="930" y="135" fill="#393C56" font-family="Helvetica" font-size="14px">Get_Process_Data.HDBETProcessor...</text></switch></g><path d="M 331 192.5 L 413.63 192.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 418.88 192.5 L 411.88 196 L 413.63 192.5 L 411.88 189 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="0" width="331" height="385" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 333px; height: 385px; padding-top: 0px; margin-left: 0px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 331px; height: 385px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>Get_Process_Data.Process</b></p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> save_path: <br /> response_data: <br /> target_img: <br /> api_url: <br /> dataset_id: <br /> query: <br /> T2_path: <br /> version: <br /> T1_path: </p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> __init__(self, dataset_id, version, save_path, dest_path, target_img=(256,256)): <br /> RecQuery(self, id): <br /> extract_subject_modality(self, url): <br /> GetURL(self, ant_id): <br /> CoordinateProcess(self, subDic): <br /> Download(self, filename, url, download_directory): <br /> ApplyBET(self,filename,download_directory): </p></div></div></div></foreignObject><text x="0" y="14" fill="#393C56" font-family="Helvetica" font-size="14px">Get_Process_Data.Process...</text></switch></g><rect x="1390" y="44" width="350" height="297" fill="#f2cc8f" stroke="#e07a5f" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 352px; height: 297px; padding-top: 44px; margin-left: 1390px;"><div data-drawio-colors="color: #393C56; " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 350px; height: 297px; overflow: hidden;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(57, 60, 86); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>Get_Process_Data.TransformImage</b></p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> save_path: <br /> file_path: <br /> target_img: <br /> modality: <br /> subject_number: <br /> idx: <br /> group: </p><hr size="1" /><p style="margin:0 0 0 4px;line-height:1.6;"> __init__(self,file_path,group,save_path,target_img=(256,256),idx=None): <br /> process_nii(self,indice=None): <br /> FilterImg(self,data,indice=None,blackper=0.6): <br /> crop_images(self,data,margin=5,target_shape=(256, 256)): <br /> ApplyOperations(self,img,seq): </p></div></div></div></foreignObject><text x="1390" y="58" fill="#393C56" font-family="Helvetica" font-size="14px">Get_Process_Data.TransformImage...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>